# Description: Elliptic curve based signing and verification tool
# URL:         https://github.com/leahneukirchen/outils
# Maintainer:  CRUX System Team, core-ports at crux dot nu

name=signify
version=20200707
gitversion=1f93b1027c4be9f27f3a4b8dabb2ae3132e1cb6a
release=1
source=(https://github.com/leahneukirchen/outils/archive/$gitversion/outils-$version.tar.gz 
        cruxify.patch)

build() {
	cd outils-$gitversion

	patch -p0 -i $SRC/cruxify.patch

	export CFLAGS+=' -DSIGNIFYROOT=\"/etc/ports\"'
	make PREFIX=/usr src/usr.bin/signify/signify

	install -d $PKG/usr/{bin,share/man/man1}
	install -m 0755 src/usr.bin/signify/signify $PKG/usr/bin
	install -m 0644 src/usr.bin/signify/signify.1 $PKG/usr/share/man/man1
}
